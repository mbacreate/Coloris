/*!
 * Copyright (c) 2021 Momo Bassit.
 * Licensed under the MIT License (MIT)
 * https://github.com/mdbassit/ColorVarPicker
 */
!function(p,u,s){var d,v,i,f,c,a,r=u.createElement("canvas").getContext("2d"),h={r:0,g:0,b:0,h:0,s:0,v:0,a:1},b={el:"[data-coloris]",parent:"body",theme:"default",themeMode:"light",forceVariables:!0,wrap:!0,margin:2,format:"hex",formatToggle:!1,swatches:[],swatchesOnly:!0,alpha:!0,forceAlpha:!1,focusInput:!1,selectInput:!1,inline:!1,defaultColor:"#000000"},n={},l="",g={},m=!1;function k(e){if("object"==typeof e)for(var t in e)switch(t){case"el":E(e.el),!1!==e.wrap&&A(e.el);break;case"parent":(d=u.querySelector(e.parent))&&(d.appendChild(v),b.parent=e.parent,d===u.body&&(d=null));break;case"themeMode":b.themeMode=e.themeMode,"auto"===e.themeMode&&p.matchMedia&&p.matchMedia("(prefers-color-scheme: dark)").matches&&(b.themeMode="dark");case"theme":e.theme&&(b.theme=e.theme),v.className="color-var-picker-picker color-var-picker-"+b.theme+" color-var-picker-"+b.themeMode,b.inline&&S();break;case"margin":e.margin*=1,b.margin=(isNaN(e.margin)?b:e).margin;break;case"wrap":e.el&&e.wrap&&A(e.el);break;case"formatToggle":b.formatToggle=!!e.formatToggle,N("color-var-picker-format").style.display=b.formatToggle?"block":"none",b.formatToggle&&(b.format="auto");break;case"swatches":Array.isArray(e.swatches)&&function(){var t=[];e.swatches.forEach(function(e,n){var l=[];e.values.forEach(function(e,t){var a=V(e),r=a.isCSSVar,o=a.cssVar,a=!0;r&&(o=I(o),a=CSS.supports("color",o)),a&&l.push('<button type="button" '+(r?"":'class="color-var-picker-no-variable"')+' id="color-var-picker-swatch-'+n+"-"+t+'" aria-labelledby="color-var-picker-swatch-label color-var-picker-swatch-'+n+"-"+t+'" style="color: '+e+';">'+e+"</button>")}),t.push('<div id="color-var-picker-swatch-panel-'+n+'" class="color-var-picker-swatch-panel"><div class="color-var-picker-swatch-panel-title">'+e.name+'</div><div id="color-var-picker-swatch-panel-'+n+'-swatches">'+l.join("")+"</div></div>")}),N("color-var-picker-swatches-panels").innerHTML=t.length?'<div class="color-var-picker-swatch-panel-wrapper">'+t.join("")+"</div>":"",b.swatches=e.swatches.slice()}();break;case"swatchesOnly":b.swatchesOnly=!!e.swatchesOnly,v.setAttribute("data-minimal",b.swatchesOnly);break;case"forceVariables":b.forceVariables=!!e.forceVariables,v.setAttribute("data-pure-variables",b.forceVariables);break;case"alpha":b.alpha=!!e.alpha,v.setAttribute("data-alpha",b.alpha);break;case"inline":var a;b.inline=!!e.inline,v.setAttribute("data-inline",b.inline),b.inline&&(a=e.defaultColor||b.defaultColor,c=x(a),S(),L(a));break;default:b[t]=e[t]}}function y(e,t){"string"==typeof e&&"object"==typeof t&&(n[e]=t,m=!0)}function w(e){delete n[e],0===Object.keys(n).length&&(m=!1,e===l&&o())}function t(r){if(m){var e,o=["el","wrap","inline","defaultColor"];for(e in n)if("break"===function(e){var t=n[e];if(r.matches(e)){for(var a in l=e,g={},o.forEach(function(e){return delete t[e]}),t)g[a]=Array.isArray(b[a])?b[a].slice():b[a];return k(t),"break"}}(e))break}}function o(){0<Object.keys(g).length&&(k(g),l="",g={})}function E(e){O(u,"click",e,function(e){b.inline||(t(e.target),f=e.target,a=f.value,c=x(a),v.classList.add("color-var-picker-open"),S(),L(a),(b.focusInput||b.selectInput)&&i.focus({preventScroll:!0}),b.selectInput&&i.select(),f.dispatchEvent(new Event("open",{bubbles:!0})))}),O(u,"input",e,function(e){var t=e.target.parentNode;t.classList.contains("color-var-picker-field")&&(t.style.color=e.target.value)})}function S(){var e,t,a,r,o=d,n=p.scrollY,l=v.offsetWidth,i=v.offsetHeight,c={left:!1,top:!1},s={x:0,y:0};o&&(a=p.getComputedStyle(o),e=parseFloat(a.marginTop),r=parseFloat(a.borderTopWidth),(s=o.getBoundingClientRect()).y+=r+n),b.inline||(a=(t=f.getBoundingClientRect()).x,r=n+t.y+t.height+b.margin,o?(a-=s.x,r-=s.y,a+l>o.clientWidth&&(a+=t.width-l,c.left=!0),r+i>o.clientHeight-e&&i+b.margin<=t.top-(s.y-n)&&(r-=t.height+i+2*b.margin,c.top=!0),r+=o.scrollTop):(a+l>u.documentElement.clientWidth&&(a+=t.width-l,c.left=!0),r+i-n>u.documentElement.clientHeight&&i+b.margin<=t.top&&(r=n+t.y-i-b.margin,c.top=!0)),v.classList.toggle("color-var-picker-left",c.left),v.classList.toggle("color-var-picker-top",c.top),v.style.left=a+"px",v.style.top=r+"px")}function A(e){u.querySelectorAll(e).forEach(function(e){var t,a=e.parentNode;a.classList.contains("color-var-picker-field")||((t=u.createElement("div")).innerHTML='<button type="button" aria-labelledby="color-var-picker-open-label"></button>',a.insertBefore(t,e),t.setAttribute("class","color-var-picker-field"),t.style.color=e.value,t.appendChild(e))})}function C(e){var t;f&&!b.inline&&(t=f,e&&(f=null,a!==t.value&&(t.value=a,t.dispatchEvent(new Event("input",{bubbles:!0})))),setTimeout(function(){a!==t.value&&t.dispatchEvent(new Event("change",{bubbles:!0}))}),v.classList.remove("color-var-picker-open"),m&&o(),t.dispatchEvent(new Event("close",{bubbles:!0})),b.focusInput&&t.focus({preventScroll:!0}),f=null)}function L(e){var t=V(e),a=t.isCSSVar,t=t.cssVar,t=function(e){var t;r.fillStyle="#000",r.fillStyle=e,(e=/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i.exec(r.fillStyle))?(t={r:+e[3],g:+e[4],b:+e[5],a:+e[6]}).a=+t.a.toFixed(2):(e=r.fillStyle.replace("#","").match(/.{2}/g).map(function(e){return parseInt(e,16)}),t={r:e[0],g:e[1],b:e[2],a:1});return t}(a?I(t):e),e=function(e){var t=e.r/255,a=e.g/255,r=e.b/255,o=s.max(t,a,r),n=s.min(t,a,r),l=o-n,i=o,c=0,n=0;l&&(o===t&&(c=(a-r)/l),o===a&&(c=2+(r-t)/l),o===r&&(c=4+(t-a)/l),o&&(n=l/o));return{h:(c=s.floor(60*c))<0?c+360:c,s:s.round(100*n),v:s.round(100*i),a:e.a}}(t);T(t,e),v.style.color="hsl("+e.h+", 100%, 50%)"}function x(e){e=e.substring(0,3).toLowerCase();return"rgb"===e||"hsl"===e?e:"hex"}function M(e){e=void 0!==e?e:i.value,f&&(f.value=e,f.dispatchEvent(new Event("input",{bubbles:!0}))),u.dispatchEvent(new CustomEvent("picker:pick",{detail:{color:e}}))}function T(e,t){void 0===t&&(t={});var a,r,o=b.format;for(a in e=void 0===e?{}:e)h[a]=e[a];for(r in t)h[r]=t[r];var n,l=function(e){var t=e.r.toString(16),a=e.g.toString(16),r=e.b.toString(16),o="";e.r<16&&(t="0"+t);e.g<16&&(a="0"+a);e.b<16&&(r="0"+r);b.alpha&&(e.a<1||b.forceAlpha)&&(e=255*e.a|0,o=e.toString(16),e<16&&(o="0"+o));return"#"+t+a+r+o}(h);l.substring(0,7);switch("mixed"===o?o=1===h.a?"hex":"rgb":"auto"===o&&(o=c),o){case"hex":i.value=l;break;case"rgb":i.value=(n=h,!b.alpha||1===n.a&&!b.forceAlpha?"rgb("+n.r+", "+n.g+", "+n.b+")":"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")");break;case"hsl":i.value=(n=function(e){var t,a=e.v/100,r=a*(1-e.s/100/2);0<r&&r<1&&(t=s.round((a-r)/s.min(r,1-r)*100));return{h:e.h,s:t||0,l:s.round(100*r),a:e.a}}(h),!b.alpha||1===n.a&&!b.forceAlpha?"hsl("+n.h+", "+n.s+"%, "+n.l+"%)":"hsla("+n.h+", "+n.s+"%, "+n.l+"%, "+n.a+")")}}function V(e){e=/^var\((--.+)\)$/i.exec(e);return{isCSSVar:0<(null==e?void 0:e.length),cssVar:null==e?void 0:e[1]}}function I(e){var t;return p.getComputedStyle?(null==(t=p.getComputedStyle(u.documentElement).getPropertyValue(e))?void 0:t.trim())||e:null}function N(e){return u.getElementById(e)}function O(e,t,a,r){var o=Element.prototype.matches||Element.prototype.msMatchesSelector;"string"==typeof a?e.addEventListener(t,function(e){o.call(e.target,a)&&r.call(e.target,e)}):(r=a,e.addEventListener(t,r))}function j(e,t){t=void 0!==t?t:[],"loading"!==u.readyState?e.apply(void 0,t):u.addEventListener("DOMContentLoaded",function(){e.apply(void 0,t)})}void 0!==NodeList&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),p.ColorVarPicker=function(){var o={set:k,wrap:A,close:C,setInstance:y,removeInstance:w,updatePosition:S};function e(e){j(function(){e&&("string"==typeof e?E:k)(e)})}for(var t in o)!function(r){e[r]=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];j(o[r],t)}}(t);return e}(),j(function(){d=null,(v=u.createElement("div")).setAttribute("id","color-var-picker-picker"),v.setAttribute("data-pure-variables",b.forceVariables),v.className="color-var-picker-picker",v.innerHTML='<div id="color-var-picker-color-value" class="color-var-picker-color" type="text" value="" spellcheck="false" aria-label="color-variable-picker"></div><div id="color-var-picker-swatches-panels" class="color-var-picker-swatches-panels"></div>',u.body.appendChild(v),i=N("color-var-picker-color-value"),E(b.el),A(b.el),O(v,"mousedown",function(e){v.classList.remove("color-var-picker-keyboard-nav"),e.stopPropagation()}),O(i,"change",function(e){(f||b.inline)&&(L(i.value),M())}),O(u,"click",".color-var-picker-format input",function(e){c=e.target.value,T(),M()}),O(v,"click",".color-var-picker-swatches-panels button",function(e){L(e.target.textContent),M(),b.swatchesOnly&&C()}),O(u,"mousedown",function(e){v.classList.remove("color-var-picker-keyboard-nav"),C()}),O(u,"keydown",function(e){"Escape"===e.key?C(!0):["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&v.classList.add("color-var-picker-keyboard-nav")}),O(u,"click",".color-var-picker-field button",function(e){m&&o(),e.target.nextElementSibling.dispatchEvent(new Event("click",{bubbles:!0}))})})}(window,document,Math);